{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\rupes\\\\Desktop\\\\react-learn\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\rupes\\\\Desktop\\\\react-learn\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\rupes\\\\Desktop\\\\react-learn\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\rupes\\\\Desktop\\\\react-learn\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\rupes\\\\Desktop\\\\react-learn\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import ScrollMenu from'react-horizontal-scrolling-menu';import'./App.css';import{AreaChart,Area,XAxis,YAxis,CartesianGrid,Tooltip}from'recharts';var MenuItem1=function MenuItem1(_ref){var text=_ref.text,selectedKey=_ref.selectedKey;return React.createElement(\"div\",{className:\"menu-item \".concat(selectedKey?'active':'')},text);};var MenuItem2=function MenuItem2(_ref2){var text=_ref2.text,selectedLabel=_ref2.selectedLabel;return React.createElement(\"div\",{className:\"menu-item \".concat(selectedLabel?'active':'')},text);};export var Menu1=function Menu1(list,selectedKey){return list.map(function(el){var prefName=el.prefName,prefCode=el.prefCode;return React.createElement(MenuItem1,{text:prefName,key:prefCode,selected:selectedKey});});};export var Menu2=function Menu2(list,selectedLabel){return list.map(function(el){var label=el.label;return React.createElement(MenuItem2,{text:label,key:label,selected:selectedLabel});});};var Arrow=function Arrow(_ref3){var text=_ref3.text,className=_ref3.className;return React.createElement(\"div\",{className:className},text);};var ArrowLeft=Arrow({text:'<',className:'arrow-prev'});var ArrowRight=Arrow({text:'>',className:'arrow-next'});//const selected = '北海道';\nvar App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.onSelect=function(key,name){fetch('https://opendata.resas-portal.go.jp/api/v1/population/composition/perYear?prefCode='+key,{method:'GET',headers:{\"Content-Type\":\"application/json\",\"X-API-KEY\":\"0TcDvnFjHBuHwOTpnMkYeE4c4KZVTTObEOedJxsg\"}}).then(function(res){return res.json();}).then(function(jdata){_this.setState({prefPop:jdata.result.data,selectedLabel:jdata.result.data[0].label,selectedKey:key,selectedName:name,CData:_this.getPerLabelData(jdata.result.data[0].label,jdata.result.data)});});};_this.getPerLabelData=function(key,list){return list.filter(function(el){return el.label===key;}).map(function(elem){var data=elem.data;return data;});};_this.onSelectM2=function(key){_this.setState({CData:_this.getPerLabelData(key,_this.state.prefPop),selectedLabel:key});};_this.state={selectedName:'北海道',selectedKey:1,prefList:[{prefCode:1,prefName:\"北海道\"}],selectedLabel:'',prefPop:[],CData:[]};_this.menuItems1=Menu1(_this.state.prefList,_this.state.selectedKey);_this.menuItems2=Menu2(_this.state.prefPop,_this.state.selectedLabel);return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch('https://opendata.resas-portal.go.jp/api/v1/prefectures',{method:'GET',headers:{\"Content-Type\":\"application/json\",\"X-API-KEY\":\"0TcDvnFjHBuHwOTpnMkYeE4c4KZVTTObEOedJxsg\"}}).then(function(res){return res.json();}).then(function(data){_this2.setState({prefList:data.result});});}/*\n\n  */},{key:\"render\",value:function render(){var _this$state=this.state,selectedKey=_this$state.selectedKey,selectedLabel=_this$state.selectedLabel;// Create menu from items\nvar menu1=Menu1(this.state.prefList,selectedKey);var menu2=Menu2(this.state.prefPop,selectedLabel);var tempData=this.state.CData;return React.createElement(\"div\",{className:\"App\"},React.createElement(\"div\",{id:\"myheader\"},\"Population Composition Trends of Different Prefectures\"),React.createElement(ScrollMenu,{data:menu1,arrowLeft:ArrowLeft,arrowRight:ArrowRight,selected:selectedKey,onSelect:this.onSelect}),React.createElement(ScrollMenu,{data:menu2,arrowLeft:ArrowLeft,arrowRight:ArrowRight,selected:selectedLabel,onSelect:this.onSelectM2}),React.createElement(\"div\",{align:\"center\"},React.createElement(AreaChart,{height:400,width:1000,data:tempData[0],margin:{top:30,right:30,left:30,bottom:30}},React.createElement(\"defs\",null,React.createElement(\"linearGradient\",{id:\"colorUv\",x1:\"0\",y1:\"0\",x2:\"0\",y2:\"1\"},React.createElement(\"stop\",{offset:\"5%\",stopColor:\"#8884d8\",stopOpacity:0.8}),React.createElement(\"stop\",{offset:\"95%\",stopColor:\"#8884d8\",stopOpacity:0}))),React.createElement(XAxis,{dataKey:\"year\",label:{value:'Year',position:'bottom'}}),React.createElement(YAxis,null),React.createElement(CartesianGrid,{strokeDasharray:\"3 3\"}),React.createElement(Tooltip,null),React.createElement(Area,{type:\"monotone\",dataKey:\"value\",stroke:\"#8884d8\",fillOpacity:1,fill:\"url(#colorUv)\"}))));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["C:/Users/rupes/Desktop/react-learn/src/App.js"],"names":["React","Component","ScrollMenu","AreaChart","Area","XAxis","YAxis","CartesianGrid","Tooltip","MenuItem1","text","selectedKey","MenuItem2","selectedLabel","Menu1","list","map","el","prefName","prefCode","Menu2","label","Arrow","className","ArrowLeft","ArrowRight","App","props","onSelect","key","name","fetch","method","headers","then","res","json","jdata","setState","prefPop","result","data","selectedName","CData","getPerLabelData","filter","elem","onSelectM2","state","prefList","menuItems1","menuItems2","menu1","menu2","tempData","top","right","left","bottom","value","position"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport ScrollMenu from 'react-horizontal-scrolling-menu';\nimport './App.css';\n\nimport {\n  AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip\n} from 'recharts';\n\nconst MenuItem1 = ({text, selectedKey}) => {\n  return <div\n    className={`menu-item ${selectedKey ? 'active' : ''}`}\n    >{text}</div>;\n};\n\nconst MenuItem2 = ({text, selectedLabel}) => {\n  return <div\n    className={`menu-item ${selectedLabel ? 'active' : ''}`}\n    >{text}</div>;\n};\n\nexport const Menu1 = (list, selectedKey) =>\n  list.map(el => {\n    const {prefName, prefCode} = el;\n \n    return <MenuItem1 text={prefName} key={prefCode} selected={selectedKey} />;\n  });\n\nexport const Menu2 = (list, selectedLabel) =>\n  list.map(el => {\n    const {label} = el;\n \n    return <MenuItem2 text={label} key={label} selected={selectedLabel} />;\n  });\n\nconst Arrow = ({ text, className }) => {\n    return (\n      <div\n        className={className}\n      >{text}</div>\n    );\n  };\n\nconst ArrowLeft = Arrow({ text: '<', className: 'arrow-prev' });\nconst ArrowRight = Arrow({ text: '>', className: 'arrow-next' });\n\n//const selected = '北海道';\n\n\nclass App extends Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      selectedName: '北海道',\n      selectedKey: 1,\n      prefList: [{prefCode: 1, prefName: \"北海道\"}],\n      selectedLabel: '',\n      prefPop: [],\n      CData: []\n    }\n\n    this.menuItems1 = Menu1(this.state.prefList, this.state.selectedKey);\n    this.menuItems2 = Menu2(this.state.prefPop, this.state.selectedLabel);\n  }\n\n  onSelect = (key, name) => {\n    fetch('https://opendata.resas-portal.go.jp/api/v1/population/composition/perYear?prefCode='+key, {\n      method: 'GET',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-API-KEY\": \"0TcDvnFjHBuHwOTpnMkYeE4c4KZVTTObEOedJxsg\"\n      }\n    }).then((res) => res.json()).then(jdata => {\n      this.setState({\n        prefPop: jdata.result.data,\n        selectedLabel: jdata.result.data[0].label,\n        selectedKey: key,\n        selectedName: name,\n        CData: this.getPerLabelData(jdata.result.data[0].label, jdata.result.data)\n      });\n    });\n  }\n\n  getPerLabelData = (key, list) => {\n    return list.filter((el) => el.label === key).map((elem) => {\n      const {data} = elem;\n      return data;\n    });\n  }\n\n  onSelectM2 = (key) => {\n    this.setState({\n      CData: this.getPerLabelData(key, this.state.prefPop),\n      selectedLabel: key\n    });\n  }\n\n  componentDidMount(){\n    fetch('https://opendata.resas-portal.go.jp/api/v1/prefectures', {\n      method: 'GET',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-API-KEY\": \"0TcDvnFjHBuHwOTpnMkYeE4c4KZVTTObEOedJxsg\"\n      }\n    }).then((res) => res.json()).then(data => {\n      this.setState({\n        prefList: data.result\n      });\n    });\n  }\n\n  /*\n\n  */\n\n  render() {\n    const { selectedKey, selectedLabel } = this.state;\n    // Create menu from items\n    const menu1 = Menu1(this.state.prefList, selectedKey);\n    const menu2 = Menu2(this.state.prefPop, selectedLabel);\n    const tempData = this.state.CData;\n    return (\n      <div className=\"App\">\n        <div id='myheader'>Population Composition Trends of Different Prefectures</div>\n        <ScrollMenu\n          data={menu1}\n          arrowLeft={ArrowLeft}\n          arrowRight={ArrowRight}\n          selected={selectedKey}\n          onSelect={this.onSelect}\n        />\n        <ScrollMenu\n          data={menu2}\n          arrowLeft={ArrowLeft}\n          arrowRight={ArrowRight}\n          selected={selectedLabel}\n          onSelect={this.onSelectM2}\n        />\n        \n        <div align=\"center\">\n        <AreaChart height={400} width={1000} data={tempData[0]}\n              margin={{ top: 30, right: 30, left: 30, bottom: 30 }}  >\n          <defs>\n            <linearGradient id=\"colorUv\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n              <stop offset=\"5%\" stopColor=\"#8884d8\" stopOpacity={0.8}/>\n              <stop offset=\"95%\" stopColor=\"#8884d8\" stopOpacity={0}/>\n            </linearGradient>\n          </defs>\n          <XAxis dataKey=\"year\" label={{value: 'Year', position: 'bottom'}}>\n          </XAxis>\n          <YAxis/>\n          <CartesianGrid strokeDasharray=\"3 3\" />\n          <Tooltip />\n          <Area type=\"monotone\" dataKey=\"value\" stroke=\"#8884d8\" fillOpacity={1} fill=\"url(#colorUv)\"/>\n    </AreaChart>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}